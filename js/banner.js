// Generated by CoffeeScript 1.6.3
(function() {
  var banner, bannerImg, isBannerClosed, sizeBanner;

  bannerImg = $("#post-banner");

  banner = $("div.post.banner");

  isBannerClosed = true;

  $(bannerImg).load(function() {
    return sizeBanner($(this), true, false);
  });

  $(window).resize(function() {
    return sizeBanner(bannerImg, isBannerClosed, false);
  });

  banner.click(function() {
    if (isBannerClosed) {
      banner.animate({
        "height": bannerImg.height()
      }, 200);
      bannerImg.animate({
        "margin-top": 0
      }, 200);
      banner.find(".banner-content").fadeOut(200);
    } else {
      sizeBanner(bannerImg, true, true);
      banner.find(".banner-content").fadeIn(200);
    }
    return isBannerClosed = !isBannerClosed;
  });

  sizeBanner = function(b, closed, animate) {
    var bImgClosed, bannerClosed, bannerOpen, bannerPosition, h;
    h = b.height();
    bannerPosition = banner.attr("bannerposition");
    bImgClosed = {
      "margin-top": -bannerPosition * h
    };
    bannerClosed = {
      "height": banner.width() / 5
    };
    bannerOpen = {
      "height": bannerImg.height()
    };
    if (closed) {
      if (animate) {
        banner.animate(bannerClosed, 200);
        return b.animate(bImgClosed, 200);
      } else {
        banner.css(bannerClosed);
        return b.css(bImgClosed);
      }
    } else {
      if (animate) {
        return banner.animate(bannerOpen, 200);
      } else {
        return banner.css(bannerOpen);
      }
    }
  };

}).call(this);
