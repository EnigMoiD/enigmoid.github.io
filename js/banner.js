// Generated by CoffeeScript 1.6.3
(function() {
  var banner, bannerClosed, bannerImg, sizeBanner;

  $.easing.nice = function(t, millisecondsSince, startValue, endValue, totalDuration) {
    var By, x1, x2, y1, y2;
    x1 = .17;
    y1 = .67;
    x2 = .83;
    y2 = .67;
    By = 3 * Math.pow(1 - t, 2) * t * y1 + 3 * (1 - t) * Math.pow(t, 2) * y2 + Math.pow(t, 3);
    return By;
  };

  bannerImg = $("#post-banner");

  banner = $("div.post.banner");

  bannerClosed = true;

  $(bannerImg).load(function() {
    return sizeBanner($(this), true, true);
  });

  $(window).resize(function() {
    return sizeBanner(bannerImg, bannerClosed, false);
  });

  banner.click(function() {
    if (bannerClosed) {
      banner.animate({
        "height": bannerImg.height()
      }, 200, "nice");
      bannerImg.animate({
        "margin-top": 0
      }, 200, "nice");
    } else {
      sizeBanner(bannerImg, true, true);
    }
    return bannerClosed = !bannerClosed;
  });

  sizeBanner = function(b, closed, animate) {
    var h;
    if (closed) {
      h = b.height();
      if (animate) {
        banner.animate({
          "height": banner.width() / 5
        }, 200, "nice");
        return b.animate({
          "margin-top": -h / 3
        }, 200, "nice");
      } else {
        banner.height(banner.width() / 5);
        return b.css("margin-top", -h / 3);
      }
    } else {
      if (animate) {
        return banner.animate({
          "height": bannerImg.height()
        }, 200, "nice");
      } else {
        return banner.css("height", bannerImg.height());
      }
    }
  };

}).call(this);
